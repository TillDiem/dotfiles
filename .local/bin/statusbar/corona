#!/bin/bash
#( [  "$(stat -c %y ~/.cache/corona | cut -d' ' -f1)" != "$(date '+%Y-%m-%d')" ] || [ "$1" = "up" ] )&& #updates daily
	curl -s https://corona-stats.online/Switzerland | sed -r "s/[[:cntrl:]]\[[0-9]{1,3}m//g" > ~/.cache/corona && notify-send "Corona" "Stats updated"; sleep 5; pkill -RTMIN+15 dwmblocks

increase=$( grep "Switzerland" ~/.cache/corona |
	sed "s/\s*//g; s/â•‘//g; s/â”‚/;/g" | awk -F';' '{print $4}' )
[ "$increase" != "" ] && ( grep "Switzerland" ~/.cache/corona |
        sed "s/\s*//g; s/â•‘//g; s/â”‚/;/g" |
	awk -F';' '{print "ðŸ˜·"$3 " ("$4") ðŸ’€"$5 }' ) || ( grep "Switzerland" ~/.cache/corona |
        sed "s/\s*//g; s/â•‘//g; s/â”‚/;/g" |
	awk -F';' '{print "ðŸ˜·"$3 " ðŸ’€"$5 }' )
